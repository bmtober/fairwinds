== Fairwinds Game Tutorial 8 - Sustenance and the Health Journal

When a new 'Fairian' joins the game, they have no money, no land, and no
food.  The one thing a new player is endowed with is perfect health.
Maintaining health requires sustenance (food): during each click that a
'Fairian' has enough food to meet the sustenance requirement of one food
unit per click, health improves. Otherwise, health deteriorates.

In both cases, the change over time exhibits diminishing returns
behavior in that as improving health approaches 100%, the per click
improvement decreases so as to never exceed unity. Conversely,
diminishing health is never less than zero so as health
decreases, the per-click amount of atrophy itself decreases.
 
The changes to 'Fairian' health are recorded in the health_journal.


--------------------------------------------
fairwinds=> select click,debit,credit,description 
			from health_journal where fairian_name = 'alice';

 click |  debit   |  credit  |                           description                           
-------+----------+----------+-----------------------------------------------------------------
     1 |        1 |          | Initial health
     2 |          | 0.059635 | health deterioration based on insufficient sustenance balance 0
     3 |          | 0.056079 | health deterioration based on insufficient sustenance balance 0
     4 |          | 0.052735 | health deterioration based on insufficient sustenance balance 0
     5 | 0.010046 |          | health improvement based on sustenance balance 1.000010
     6 | 0.009446 |          | health improvement based on sustenance balance 1.000052
     7 | 0.008883 |          | health improvement based on sustenance balance 1.000146
(7 rows)
--------------------------------------------

These seven rows show that:

* At click 1, when Alice entered the game, she was endowed with perfect health (100%).
* Through click four, Alice's health decreased by a small percentage each click since she had no food.
* At click 5, Alice's health began to increase once she began producing food through cultivation.

The transition to improving health after click 4 corresponds to when
Alice began her engagement in cultivation and thereby satisfied the
periodic sustenance requirement. Note further that the per click health
decrease from click 1 through 4 itself decreases, that is, her health
decreases by a continually smaller amount. Conversely, during clicks 5,
6, and 7, her health improves by decreasing amounts. And
lastly note in the description column on clicks 5, 6, and 7
the trend of gradually increasing food surplus is annotated.

With the following more complex, 'running total' query, Alice can review
her net health change over time:


--------------------------------------------
fairwinds=> with running_total as 
	(
	  select fairian_name, click, debit, credit, 
            sum(debit) over w as d, sum(credit) over w as c 
	    from health_journal 
            window w as (partition by fairian_name order by click)
	) select fairian_name, click, debit, credit, d-c as net 
            from running_total order by fairian_name, click;
			
 fairian_name | click |   debit  |   credit  |   net
--------------+-------+----------+----------+----------
 alice        |     1 |        1 |          |         
 alice        |     2 |          | 0.059635 | 0.940365
 alice        |     3 |          | 0.056079 | 0.884286
 alice        |     4 |          | 0.052735 | 0.831551
 alice        |     5 | 0.010046 |          | 0.841597
 alice        |     6 | 0.009446 |          | 0.851043
 alice        |     7 | 0.008883 |          | 0.859926
(7 rows)
--------------------------------------------

The net column shows the running total of the difference between the
additions (debit) and reductions (credit) columns, thus for each row,
while the debit and credit columns show changes to health, the
net column indicates her actual health at that click in time:
it decreases through click 4 and then transitions to
improvement subsequently.

The rate of health improvement and deterioration are small percentage
constants fixed when the game is initialized.

Note that a 'Fairian'''s' net health value influences their ability to
perform skilled tasks, 'e.g.', a 'Fairian'''s' 'effectiveness' is
adversely affected by poor health and decreases their food production.

